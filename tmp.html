<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Housekeeping</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      /* Custom Styles */
      body {
        background-color: #f8f9fa;
      }
      h1 {
        margin: 20px 0;
      }
      .breadcrumb {
        background-color: transparent;
        margin-bottom: 20px;
      }
      .table-container {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .table {
        width: 100%;
        border-collapse: collapse;
      }
      .btn-assign {
        background-color: #28a745;
        color: white;
        border: none;
        border-radius: 5px;
        padding: 10px 20px;
        transition: background-color 0.3s ease;
      }
      .btn-assign:hover {
        background-color: #218838;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Title -->
      <h1>Housekeeping Tasks</h1>

      <!-- Navigation Breadcrumb -->
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="#">BOH</a></li>
          <li class="breadcrumb-item active">Housekeeping</li>
        </ol>
      </nav>

      <!-- Housekeeping Tasks Table -->
      <div class="table-container">
        <table class="table table-striped" id="housekeepingTable">
          <thead>
            <tr>
              <th>Name</th>
              <th>Task</th>
              <th>Status</th>
              <th>Start</th>
              <th>End</th>
              <th>Upcoming</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </div>

    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      // Example schedule data
      const schedule = [
        {
          name: "Alice",
          tasks: [
            {
              task: "Clean Room 101",
              subtasks: [false, false],
              start: "09:00",
              end: "09:30",
            },
            {
              task: "Restock Supplies",
              subtasks: [true, false],
              start: "10:00",
              end: "10:30",
            },
          ],
        },
        {
          name: "Bob",
          tasks: [
            {
              task: "Vacuum Hallway",
              subtasks: [true, true],
              start: "08:30",
              end: "09:00",
            },
            {
              task: "Wash Windows",
              subtasks: [false, false],
              start: "09:30",
              end: "10:00",
            },
          ],
        },
      ];

      // Determine task status
      function getTaskStatus(subtasks) {
        const total = subtasks.length;
        const completed = subtasks.filter(Boolean).length;
        if (completed === 0) return "To do";
        if (completed < total) return "Doing";
        return "Done";
      }

      // Find the next task
      function getNextTask(tasks) {
        return tasks.find((task) => getTaskStatus(task.subtasks) !== "Done");
      }

      // Populate the table
      function populateTable() {
        const tableBody = document.querySelector("#housekeepingTable tbody");
        schedule.forEach((housekeeper) => {
          const nextTask = getNextTask(housekeeper.tasks);
          if (nextTask) {
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = housekeeper.name;

            const taskCell = document.createElement("td");
            taskCell.textContent = nextTask.task;

            const statusCell = document.createElement("td");
            statusCell.textContent = getTaskStatus(nextTask.subtasks);

            const startCell = document.createElement("td");
            startCell.textContent = nextTask.start;

            const endCell = document.createElement("td");
            endCell.textContent = nextTask.end;

            const upcomingCell = document.createElement("td");
            const upcomingTask = housekeeper.tasks.find(
              (task) =>
                task !== nextTask && getTaskStatus(task.subtasks) !== "Done"
            );
            upcomingCell.textContent = upcomingTask
              ? upcomingTask.task
              : "None";

            row.appendChild(nameCell);
            row.appendChild(taskCell);
            row.appendChild(statusCell);
            row.appendChild(startCell);
            row.appendChild(endCell);
            row.appendChild(upcomingCell);

            tableBody.appendChild(row);
          }
        });
      }

      populateTable();
    </script>
  </body>
</html>
